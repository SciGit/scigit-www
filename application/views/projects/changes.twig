{% extends "base.twig" %}

{% block title project.name ~ " Changes" %}

{% block content %}
<div class="page-header">
  <p class="breadcrumbs">
    {{ anchor("/", "Home") | raw }} <span class="divider">&gt;</span>
    {% if member or admin %}
      {{ anchor("/projects", "My Projects") | raw }} <span class="divider">&gt;</span>
    {% else %}
      {{ anchor("/projects/explore", "Public") | raw }} <span class="divider">&gt;</span>
    {% endif %}
    {{ anchor("/projects/view/#{project.id}", project.name) | raw }} <span class="divider">&gt;</span>
    <span class="current">{{ anchor("/projects/changes/#{project.id}", "Changes") | raw }}</span>
  </p>
</div>

<div class="well-list">
  <table class="table table-condensed">
    <tr>
      <th>
        <h2>All Changes</h2>
      </th>
    </tr>
    {% if changes %}
      {% for change in changes %}
        <tr>
          <td class="change" valign="middle" data-change_id="{{ change.id }}">
            {{ anchor("/users/profile/#{change.user_id}", change.username) | raw }} made change:
            <div class="buttons">
              <div class="button">
                <em>{{ change.commit_ts | date('H:m d/m/Y') }}</em>
              </div>
              <div class="button">
                <a href="#" onclick="expandChanges(this)" class="rawlink" data-change_id="{{ change.id }}" rel="tooltip" title="Expand differences">
                  <i class="icon-plus-sign-alt icon-large"></i>
                </a>
              </div>
              <div class="button">
                <a href="/changes/files/{{ change.id }}" class="rawlink" rel="tooltip" title="View all files">
                  <i class="icon-folder-close icon-large"></i>
                </a>
              </div>
            </div>
            <div class="description">
              {{ anchor("/changes/view/#{change.id}", change.commit_msg) | raw }}
            </div>
          </td>
        </tr>
      {% endfor %}
    {% else %}
      <tr class="nohover">
        <td class="tabular">
          No changes yet.
        </td>
      </tr>
    {% endif %}
  </table>
</div>

{% endblock %}
