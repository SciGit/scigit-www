{% extends "base.twig" %}

{% block title "Register" %}

{%
set fields = [
	{
		'label': 'Username',
		'name': 'username',
		'id': 'username',
		'value': set_value('username'),
		'maxlength': 20,
		'size': 30,
	},
	{
		'label': 'Email',
		'name': 'email',
		'id': 'email',
		'value': set_value('email'),
		'maxlength': 80,
		'size': 30,
	},
	{
		'label': 'Password',
		'name': 'password',
		'id': 'password',
		'value': set_value('password'),
		'type': 'password',
		'maxlength': 20,
		'size': 30,
	},
	{
		'label': 'Confirm Password',
		'name': 'confirm_password',
		'id': 'confirm_password',
		'value': set_value('confirm_password'),
		'type': 'password',
		'maxlength': 20,
		'size': 30,
	}
]
%}

{% block content %}

<script>
$(document).ready(function() {
  $('.light-well').height($('.register-form').height());
});
</script>

<div class="page-header">
  <h1>Sign Up</h1>
</div>
<div class="sign-up-progress">
  <p>Step 1 of 2</p>
  <div class="progress">
    <div class="bar" style="width: 0%;"></div>
  </div>
</div>

<div class="row-fluid">
  <div class="span6 well light-well">
    <h2 class="center">Let's get started!</h2>
    <hr class="soften" />
    <p>Just enter some basic details for us. This will only take a minute.</p>
    <p>Once signed up, you can download the SciGit client for offline use.</p>
  </div>
  <div class="span6">
    {{ form_open('', {class: 'form-horizontal register-form'}) | raw }}
    {% for field in fields %}
      <div class="control-group {% if errors[field['name']] or form_error(field['name']) %} error {% endif %}">
        <label class="control-label" for="{{ field['id'] }}">
          {{ field['label'] }}
        </label>
        <div class="controls">
          {{ form_input(field) | raw }}
          <span class="help-inline">
            {{ form_error(field['name']) | raw }}
            {{ errors[field['name']] }}
          </span>
        </div>
      </div>
    {% endfor %}
    {% if captcha_registration %}
      <div class="control-group {% if form_error('recaptcha_response_field') or form_error('captcha') %} error {% endif %}">
        <label class="control-label" for="recaptcha_response_field">
          Captcha
        </label>
        <div class="controls">
          {% if use_recaptcha %}
            {{ recaptcha_html | raw }}
            <span class="help-inline">
              {{ form_error('recaptcha_response_field') | raw }}
            </span>
          {% else %}
            <p>{{ captcha_html | raw }}</p>
            {{ form_input('captcha', set_value('captcha')) | raw }}
            <span class="help-inline">
              {{ form_error('captcha') | raw }}
            </span>
          {% endif %}	
        </div>
      </div>
    {% endif %}
    <div class="form-actions">
      {{ form_submit({class: 'btn btn-primary', name: 'register'}, 'Register') | raw }}
      <a class="btn" href="/auth/forgot_password">Forgot password</a>
      <a class="btn" href="/auth/login">I already registered</a>
    </div>
    {{ form_close() | raw }}
  </div>
</div>

{% endblock %}
