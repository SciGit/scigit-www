{% extends "base.twig" %}

{% block title "Login" %}

{%
set fields = [
	{
		'label': 'Login or email',
		'name': 'login',
		'id': 'login',
		'value': set_value('login'),
		'maxlength': 80,
		'size': 30,
	},
	{
		'label': 'Password',
		'name': 'password',
		'id': 'password',
		'value': set_value('password'),
		'type': 'password',
		'maxlength': 20,
		'size': 30,
	},
	{
		'label': 'Remember me',
		'name': 'remember',
		'id': 'remember',
		'value': 1,
    'checked': set_value('remember'),
		'type': 'checkbox',
	},
	{
		'label': 'Confirmation Code',
		'name': 'captcha',
		'id': 'captcha',
		'maxlength': 8,
	}
]
%}

{% block content %}

<script>
$(document).ready(function() {
  equalizeColumns()
});
</script>

<div class="row">
  <div class="span5 hero-unit">
    <h2>Collaboration made easy.</h2>
    <p>SciGit is a collaboration system for researchers to work on the same
    paper with version control easily.</p>
    <p>Use the same text editor you have now. Have the convenience to work
    offline.</p>
    <p>
      <a class="btn btn-primary btn-large" href="#">
        Learn more
      </a>
    </p>
  </div>
  <div class="span5">
    {{ form_open('', {class: 'form-horizontal login-form'}) | raw }}
    {% for field in fields %}
      <div class="control-group {% if errors[field['name']] or form_error(field['name']) %} error {% endif %}">
        <label class="control-label" for="{{ field['id'] }}">
          {{ field['label'] }}
        </label>
        <div class="controls">
          {{ form_input(field) | raw }}
          <span class="help-inline">
            {{ form_error(field['name']) | raw }}
            {{ errors[field['name']] }}
          </span>
        </div>
      </div>
    {% endfor %}
    <div class="control-group">
      <div class="controls">
        {% if use_recaptcha %}
            <div id="recaptcha_image"></div>
            <a href="javascript:Recaptcha.reload()">Get another CAPTCHA</a>
            <div class="recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type('audio')">Get an audio CAPTCHA</a></div>
            <div class="recaptcha_only_if_audio"><a href="javascript:Recaptcha.switch_type('image')">Get an image CAPTCHA</a></div>
            <div class="recaptcha_only_if_image">Enter the words above</div>
            <div class="recaptcha_only_if_audio">Enter the numbers you hear</div>
            <input type="text" id="recaptcha_response_field" name="recaptcha_response_field" />
          {{ recaptcha_html | raw }}
        {% else %}
          {{ captcha_html | raw }}
        {% endif %}	
      </div>
    </div>
    <p>
    <div class="btn-group">
      <a class="btn" href="/auth/forgot_password">Forgot password</a>
      <a class="btn" href="/auth/register">Register</a>
    </div>
    </p>
    <div class="form-actions">
      {{ form_submit({class: 'btn btn-primary', name: 'login'}, 'Login') | raw }}
    </div>
    {{ form_close() | raw }}
  </div>
</div>

{% endblock %}
