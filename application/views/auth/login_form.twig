{% extends "base.twig" %}

{% block title "Login" %}

{%
set fields = [
	{
		'label': 'Login or email',
		'name': 'login',
		'id': 'login',
		'value': set_value('login'),
		'maxlength': 80,
		'size': 30,
	},
	{
		'label': 'Password',
		'name': 'password',
		'id': 'password',
		'value': set_value('password'),
		'type': 'password',
		'maxlength': 20,
		'size': 30,
	},
	{
		'label': 'Remember me',
		'name': 'remember',
		'id': 'remember',
		'value': 1,
    'checked': set_value('remember'),
		'type': 'checkbox',
	}
]
%}

{% block content %}

<script>
$(document).ready(function() {
  $('.hero-unit').height($('.login-form').height());
});
</script>

<div class="row-fluid">
  <div class="span6 hero-unit">
    <h2>Collaboration made easy.</h2>
    <p>SciGit is a collaboration system for researchers to work on the same
    paper with version control easily.</p>
    <p>Use the same text editor you have now. Have the convenience to work
    offline.</p>
    <p>
      <a class="btn btn-primary btn-large" href="#">
        Learn more
      </a>
    </p>
  </div>
  <div class="span6">
    {{ form_open('', {class: 'form-horizontal login-form'}) | raw }}
    {% for field in fields %}
      <div class="control-group {% if errors[field['name']] or form_error(field['name']) %} error {% endif %}">
        <label class="control-label" for="{{ field['id'] }}">
          {{ field['label'] }}
        </label>
        <div class="controls">
          {{ form_input(field) | raw }}
          <span class="help-inline">
            {{ form_error(field['name']) | raw }}
            {{ errors[field['name']] }}
          </span>
        </div>
      </div>
    {% endfor %}
		{% if show_captcha %}
			<div class="control-group {% if form_error('recaptcha_response_field') or form_error('captcha') %} error {% endif %}">
				<label class="control-label" for="recaptcha_response_field">
					Confirmation Code
				</label>
				<div class="controls">
					{% if use_recaptcha %}
						{{ recaptcha_html | raw }}
						<span class="help-inline">
							{{ form_error('recaptcha_response_field') | raw }}
						</span>
					{% elseif captcha_registration %}
						<p>{{ captcha_html | raw }}</p>
						{{ form_input('captcha', set_value('captcha')) | raw }}
						<span class="help-inline">
							{{ form_error('captcha') | raw }}
						</span>
					{% endif %}	
				</div>
			</div>
		{% endif %}
    <div class="form-actions">
      {{ form_submit({class: 'btn btn-primary'}, 'Login') | raw }}
      <a class="btn" href="/auth/forgot_password">Forgot password</a>
      <a class="btn" href="/auth/register">Register</a>
    </div>
    {{ form_close() | raw }}
  </div>
</div>

{% endblock %}
