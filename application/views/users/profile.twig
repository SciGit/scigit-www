{% extends "base.twig" %}

{% block title user.username ~ "'s Profile" %}

{% block content %}

<div class="well blue-well">
<div class="page-header">
  <h1>{{ user.username }}'s Profile</h1>
  <div class="pull-right snap-top">Joined <em>{{ user.created | date("F j, Y") }}</em></div>
</div>

{% if fulltitle %}
  <div class="fulltitle">{{ fulltitle }}</div>
{% endif %}
<div class="row-fluid profile-entry">
  <div class="span1 profile-field">
    Location
  </div>
  <div class="span11 profile-value">
    {{ user.location | default("Not entered") }}
  </div>
</div>
<div class="row-fluid profile-entry">
  <div class="span1 profile-field">
    About
  </div>
  <div class="span11 profile-value">
    {{ user.about | default("No information") }}
  </div>
</div>
</div>

<div class="separator"></div>

<div class="row-fluid">
  <div class="span6 well light-well">
    <h3>Projects</h3>
    <hr class="soften" />
    <ul>
      {% for project in projects %}
        <li class="project-entry">
          {{ anchor("/projects/view/#{project.id}", project.name) | raw }}
          <p class="date pull-right">{{ time_ago(project.latest_change) }}</p>
          <div class="project-description">{{ project.description }}</div>
          {% if not loop.last %}
            <hr class="soften" />
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  </div>
  <div class="span6 well light-well">
    <h3>Recent Activity</h3>
    <hr class="soften" />
    <ul>
      {% for project in projects %}
        {% if project.my_changes %}
          <li class="activity-entry">
            {{ anchor("/projects/changes/#{project.id}", project.name) | raw }}
            <ul class="unstyled">
              {% for change in project.my_changes %}
                <li>
                  <div class="pull-right date p">
                    {{ time_ago(change.commit_ts) }}
                  </div>
                  <div class="activity-msg">
                    {{ anchor("/changes/view/#{change.id}", change.commit_msg) | raw }}
                  </div>
                </li>
              {% endfor %}
            </ul>
            {% if not loop.last and loop.next.my_changes %}
              <hr class="soften" />
            {% endif %}
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
</div>

<div class="separator"></div>

{% endblock %}
